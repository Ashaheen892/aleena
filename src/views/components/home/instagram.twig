<section id="instagram-{{ position }}" class="s-block s-block--instagram px-3 lg:px-12 my-5 lg:my-10 overflow-hidden">
  <div class="pb-4 md:pb-8 text-center">
      <h2 class="text-sm md:text-xl font-bold">{{ component.instagram_title }}</h2>
  </div>







<salla-slider type="carousel" class="instagram-slider" show-controls="false" id="photos-{{ position }}-instagram">
  <div slot="items">
    {% for banner in component.instagram %}
      <div class="swiper-slide w-[calc(100%/2)] md:w-[calc(100%/4)] lg:w-[calc(100%/5)] xl:w-[calc(100%/6)]">
        <a href="javascript:void(0);" class="open-video-popup block w-full cursor-pointer" data-index="{{ loop.index0 }}">
          <div class="aspect-[9/16] relative rounded-xl overflow-hidden">
            <i class="sicon-play absolute left-3 top-3 text-white text-2xl z-10"></i>
            <div class="lazy lazy__bg !relative" data-bg="{{ banner.image }}" loading="lazy"></div>
          </div>
        </a>
      </div>
    {% endfor %}
  </div>
</salla-slider>
<div id="video-popup" class="hidden fixed inset-0 bg-white z-[9999] overflow-y-auto">
  <button id="close-popup" class="fixed top-4 right-4 text-black text-3xl z-50 font-bold">×</button>
  <div id="video-list" class="flex flex-col items-center gap-16 py-12">
    {% for banner in component.instagram %}
      <div class="video-section relative w-[90vw] max-w-[400px] aspect-[9/16]">
        <div class="relative w-full h-full overflow-hidden rounded-xl">
          <span class="text-white text-base z-10 absolute left-3 top-4">{{ banner.video_owner }}</span>

          <video
            class="story-video w-full h-full object-cover"
            muted
            playsinline
            loop
            preload="none"
            controls
            data-src="{{ banner.slider_bg_video }}"
          ></video>

          <!-- زر إغلاق فردي اختياري أعلى الفيديو -->
          <button class="close-video absolute top-2 right-2 text-black bg-white/80 rounded-full px-2 py-1 text-sm z-50">×</button>
        </div>

        <!-- المنتج المرتبط -->
        {% if banner.products and banner.products[0] %}
          <salla-products-list
            minimal
            source="selected"
            source-value="[{{ banner.products[0] }}]"
            class="[&_.s-products-list-vertical-cards]:!grid-cols-1 [&_.s-products-list-vertical-cards]:!m-0 absolute bottom-20 w-4/5"
          ></salla-products-list>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>


</section>
<style>
    .fslightbox-source{display: block !important;}
</style>
