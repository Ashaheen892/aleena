(()=>{"use strict";function t(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=Array(n);e<n;e++)a[e]=t[e];return a}function n(n,e){return function(t){if(Array.isArray(t))return t}(n)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var a,o,r,i,c=[],l=!0,s=!1;try{if(r=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;l=!1}else for(;!(l=(a=r.call(e)).done)&&(c.push(a.value),c.length!==n);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(n,e)||function(n,e){if(n){if("string"==typeof n)return t(n,e);var a={}.toString.call(n).slice(8,-1);return"Object"===a&&n.constructor&&(a=n.constructor.name),"Map"===a||"Set"===a?Array.from(n):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function a(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var o=a.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function o(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function r(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function c(t,n){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},c(t,n)}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function s(t){var n="function"==typeof Map?new Map:void 0;return s=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(l())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,n);var o=new(t.bind.apply(t,a));return e&&c(o,e.prototype),o}(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,t)},s(t)}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}var d=function(t){function e(){var t,n,a,o;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,a=i(a=e),(t=r(n,u()?Reflect.construct(a,o||[],i(n).constructor):a.apply(n,o))).importantLinks=[],t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&c(t,n)}(e,t),a=e,l=[{key:"connectedCallback",value:function(){var t=this;salla.onReady().then((function(){return salla.lang.onLoaded()})).then((function(){t.addTranslations(),t.menus=[],t.displayAllText=salla.lang.get("blocks.home.display_all"),t.initializeCart(),t.initializeCouponEvents(),t.setupCartBackdrop()}))}},{key:"addTranslations",value:function(){Object.entries({"common.total":{ar:"المجموع",en:"Total"},"common.subtotal":{ar:"المجموع الفرعي",en:"Subtotal"},"common.weight":{ar:"الوزن",en:"Weight"},"common.out_of_stock":{ar:"نفذت الكمية",en:"Out of Stock"},"cart.have_coupon":{ar:"هل لديك كوبون؟",en:"Have a Coupon?"},"cart.coupon_placeholder":{ar:"كود الخصم",en:"Discount code"},"cart.apply_coupon":{ar:"تطبيق",en:"Apply"},"cart.remove_coupon":{ar:"إزالة الكوبون",en:"Remove Coupon"},"common.discount":{ar:"لقد وفرت",en:"You saved"},"cart.view_cart":{ar:"عرض السلة",en:"View Cart"},"cart.checkout":{ar:"إتمام الطلب",en:"Checkout"},"cart.mayLike":{ar:"قد يعجبك",en:"You may like"}}).forEach((function(t){var e=n(t,2),a=e[0],o=e[1];salla.lang.add(a,o)}))}},{key:"initializeCart",value:function(){var t=this;salla.onReady((function(){t.fetchCartItems(),salla.cart.event.onCouponDeleted((function(){t.fetchCartItems()})),salla.cart.event.onItemAdded((function(n){t.fetchCartItems()})),salla.cart.event.onItemUpdated((function(n){t.fetchCartItems()})),salla.cart.event.onItemDeleted((function(){t.fetchCartItems()})),salla.event.cart.onLatestFetched((function(n){var e;null!=n&&null!==(e=n.data)&&void 0!==e&&e.cart&&t.updateCartItems(n.data.cart)})),salla.event.cart.onLatestFailed((function(t){console.error("Failed to fetch cart:",t)}))}))}},{key:"initializeCouponEvents",value:function(){var t=this;salla.onReady((function(){salla.event.on("cart::coupon.added",(function(n){var e;null!=n&&null!==(e=n.data)&&void 0!==e&&e.cart&&t.fetchCartItems()})),salla.event.on("cart::coupon.addition.succeeded",(function(n){var e;if(null!=n&&null!==(e=n.data)&&void 0!==e&&e.cart){t.fetchCartItems();var a=document.getElementById("coupon-error");a&&(a.textContent="")}})),salla.event.on("cart::coupon.addition.failed",(function(t){var n,e,a=document.getElementById("coupon-error");a&&(a.textContent=(null===(n=t.response)||void 0===n||null===(n=n.data)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.message)||(null===(e=t.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"الكوبون غير صالح")})),salla.event.on("cart::coupon.deletion.succeeded",(function(n){var e;if(null!=n&&null!==(e=n.data)&&void 0!==e&&e.cart){var a=document.getElementById("coupon-input"),o=document.getElementById("coupon-error");a&&(a.value="",a.disabled=!1),o&&(o.textContent=""),t.fetchCartItems()}})),salla.event.on("cart::coupon.deletion.failed",(function(t){console.error("Failed to remove coupon:",t)}))}))}},{key:"setupCartBackdrop",value:function(){var t=document.querySelector(".cart-backdrop");t||((t=document.createElement("div")).className="cart-backdrop fixed inset-0 bg-black/50 z-[60] hidden transition-opacity duration-300",document.body.appendChild(t));var n=function(){var n=document.querySelector(".neyam-cart-aside");null==n||n.classList.remove("show"),t.classList.remove("show"),t.classList.add("hidden"),document.body.style.overflow=""};t.addEventListener("click",n);var e=document.querySelectorAll(".neyam-cart-aside .close-cart-button");if(e.length>0&&e.forEach((function(t){t.addEventListener("click",n)})),document.querySelectorAll('[onclick*="neyam-cart-aside"]').forEach((function(n){n.onclick=function(n){n.preventDefault(),document.querySelector(".neyam-cart-aside").classList.add("show"),t.classList.remove("hidden"),t.classList.add("show")}})),!document.querySelector("#cart-backdrop-styles")){var a=document.createElement("style");a.id="cart-backdrop-styles",a.textContent="\n            .cart-backdrop {\n                opacity: 0;\n                pointer-events: none;\n            }\n\n            .cart-backdrop.show {\n                opacity: 1;\n                pointer-events: auto;\n            }\n\n            .neyam-cart-aside {\n                z-index: 70;\n            }\n        ",document.head.appendChild(a)}}},{key:"fetchCartItems",value:function(){var t=this;salla.cart.details(null,["attachments","options"]).then((function(n){var e;null!=n&&null!==(e=n.data)&&void 0!==e&&e.cart&&t.updateCartItems(n.data.cart)})).catch((function(t){return console.error("error",t)})),salla.cart.event.onDetailsFetched((function(n){var e;null!=n&&null!==(e=n.data)&&void 0!==e&&e.cart&&t.updateCartItems(n.data.cart)})),salla.cart.event.onDetailsNotFetched((function(t){}))}},{key:"updateCartItems",value:function(t){null===(n=document.getElementById("coupon-input"))||void 0===n||n.value;var n,e=document.querySelector(".neyam-cart-aside .flex-1.overflow-y-auto");if(e){salla.config.get("user.currency_code");var a=function(t){return salla.money(t)};e.innerHTML='\n            <div class="flex items-center justify-center h-full">\n                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>\n            </div>\n        ',setTimeout((function(){var n;if(null!=t&&null!==(n=t.items)&&void 0!==n&&n.length){var o=t.items.map((function(t){var n,e,o=(null===(n=t.options)||void 0===n?void 0:n.map((function(t){var n,e=null===(n=t.details)||void 0===n?void 0:n.find((function(t){return t.is_selected}));return'\n                        <div class="flex text-sm text-gray-500 gap-2">\n                            <span>'.concat(t.name,":</span>\n                            <span>").concat((null==e?void 0:e.name)||"","</span>\n                        </div>\n                    ")})).join(""))||"",r=(null===(e=t.options)||void 0===e?void 0:e.map((function(t){var n,e=null===(n=t.details)||void 0===n?void 0:n.find((function(t){return t.is_selected}));return'<input type="hidden" name="options['.concat(t.id,']" value="').concat((null==e?void 0:e.id)||"",'" />')})).join(""))||"";return'\n                    <div class="relative mb-4">\n                        <form onchange="salla.form.onChange(\'cart.updateItem\', event)" id="item-'.concat(t.id,'" class="p-4">\n                            <section class="cart-item border border-gray-200 bg-[var(--store-product-bg)] p-2 rounded-md relative">\n                                <input type="hidden" name="id" value="').concat(t.id,'">\n                                <div class="flex flex-col space-y-4">\n                                    <div class="flex rtl:space-x-reverse space-x-4">\n                                        <a href="').concat(t.url,'" class="shrink-0">\n                                            <img src="').concat(t.product_image,'"\n                                                 alt="').concat(t.product_name,'"\n                                                 class="flex-none w-24 h-20 border border-gray-200 bg-gray-100 rounded-md object-center object-cover">\n                                        </a>\n                                        <div class="flex-1 space-y-1">\n                                            <div class="text-gray-900 leading-6 text-xs flex justify-between items-center gap-3">\n                                                <a href="').concat(t.url,'" class="text-xs">').concat(t.product_name,'</a>\n                                                <div>\n                                                  <span class="text-sm text-gray-500 line-through item-regular-price ').concat(t.special_price?"":"hidden",'">').concat(a(t.product_price),'</span>\n                                                  <span class="item-price ').concat(t.special_price?"text-red-800":"text-sm text-gray-500",'">').concat(a(t.price),"</span>\n                                                </div>\n                                            </div>\n                                            \x3c!-- Product Options --\x3e\n                                            ").concat(o?'<div class="mt-2 space-y-1"> '.concat(o,"</div>\n                                            "):"","\n\n                                            ").concat(t.weight_label?'\n                                                <p class="text-sm text-gray-500">\n                                                    '.concat(salla.lang.get("common.weight"),"\n                                                    <span>").concat(t.weight_label,"</span>\n                                                </p>\n                                            "):"",'\n                                        </div>\n                                    </div>\n\n                                    <div class="flex justify-between items-center">\n                                        ').concat("donating"===t.type?"<span></span>":t.is_hidden_quantity?'<input type="hidden" value="'.concat(t.quantity,'" name="quantity" aria-label="Quantity"/>\n                                          <span class="w-10 text-center">').concat(t.quantity,"</span>"):'<div class="flex items-center">\n                                                    '.concat(r,'\n                                                    <salla-quantity-input cart-item-id="').concat(t.id,'"\n                                                        max="').concat(t.max_quantity,'"\n                                                        class="transtion transition-color duration-300"\n                                                        aria-label="Quantity"\n                                                        value="').concat(t.quantity,'"\n                                                        name="quantity">\n                                                    </salla-quantity-input>\n                                                </div>'),'\n\n                                        <p class="text-darker flex-none font-bold text-sm">\n                                            <span>').concat(salla.lang.get("common.total"),':</span>\n                                            <span class="inline-block item-total">').concat(t.is_available?a(t.total):salla.lang.get("common.out_of_stock"),'</span>\n                                        </p>\n                                    </div>\n                                </div>\n                                <span class="absolute top-1.5 rtl:left-1.5 ltr:right-1.5">\n                                    <button type="button"\n                                            class="btn--delete inline-flex justify-center items-center w-8 h-8 rounded-full bg-red-400 transition-all duration-200"\n                                            aria-label="Remove from the cart"\n                                            onclick="event.preventDefault(); salla.cart.deleteItem(').concat(t.id,')">\n                                        <svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                            <path d="M5.96057 3.36421C6.2098 2.67157 6.88232 2.17676 7.67094 2.17676C8.45957 2.17676 9.13209 2.67157 9.38132 3.36421C9.49257 3.67338 9.83791 3.83543 10.1527 3.72615C10.4674 3.61687 10.6324 3.27765 10.5211 2.96848C10.1065 1.81622 8.98783 0.989258 7.67094 0.989258C6.35406 0.989258 5.23535 1.81622 4.82074 2.96848C4.70949 3.27765 4.87446 3.61687 5.18922 3.72615C5.50398 3.83543 5.84932 3.67338 5.96057 3.36421Z" fill="#fff"/>\n                                            <path d="M0.21582 4.74967C0.21582 4.42176 0.48645 4.15592 0.820288 4.15592H14.5216C14.8555 4.15592 15.1261 4.42176 15.1261 4.74967C15.1261 5.07759 14.8555 5.34342 14.5216 5.34342H0.820288C0.48645 5.34342 0.21582 5.07759 0.21582 4.74967Z" fill="#fff"/>\n                                            <path d="M2.1234 6.1364C2.4565 6.11459 2.74454 6.36215 2.76674 6.68934L3.13743 12.1511C3.20985 13.2182 3.26146 13.9606 3.37475 14.5192C3.48464 15.0611 3.63804 15.3479 3.8584 15.5504C4.07876 15.7529 4.38032 15.8842 4.93804 15.9559C5.51301 16.0297 6.27061 16.0309 7.35934 16.0309H7.98263C9.07135 16.0309 9.82896 16.0297 10.4039 15.9559C10.9617 15.8842 11.2632 15.7529 11.4836 15.5504C11.7039 15.3479 11.8573 15.0611 11.9672 14.5192C12.0805 13.9606 12.1321 13.2182 12.2045 12.1511L12.5752 6.68934C12.5974 6.36215 12.8855 6.11459 13.2186 6.1364C13.5517 6.15822 13.8037 6.44114 13.7815 6.76833L13.408 12.2718C13.3391 13.2873 13.2834 14.1076 13.1529 14.7513C13.0171 15.4205 12.7863 15.9794 12.3095 16.4176C11.8327 16.8558 11.2495 17.0448 10.5607 17.1333C9.8982 17.2185 9.06126 17.2184 8.02513 17.2184H7.31683C6.2807 17.2184 5.44376 17.2185 4.78124 17.1333C4.09242 17.0448 3.50928 16.8558 3.03248 16.4176C2.55568 15.9794 2.32483 15.4205 2.18911 14.7513C2.05857 14.1076 2.00291 13.2873 1.934 12.2718L1.56048 6.76833C1.53828 6.44114 1.79031 6.15822 2.1234 6.1364Z" fill="#fff"/>\n                                        </svg>\n                                    </button>\n                                </span>\n                            </section>\n                        </form>\n                ')})).join(""),r='\n\n                <div class="fixed bottom-0 left-0 right-0 bg-white border-t p-4 space-y-2 z-20">\n                    \x3c!-- Coupon Section --\x3e\n                    <div class="space-y-2">\n                     <div class="flex gap-2 relative">\n                                <input type="text" id="coupon-input" placeholder="'.concat(salla.lang.get("cart.coupon_placeholder"),'"class="flex-1 px-4 py-4 border focus:outline-none focus:ring-2 focus:ring-primary"/>\n                                <salla-button class="absolute !w-auto ltr:right-2 rtl:left-2 top-1 !rounded-none" onclick="salla.cart.addCoupon(document.getElementById(\'coupon-input\').value)" width="wide" fill="solid" color="primary" loader-position="center">').concat(salla.lang.get("cart.apply_coupon"),'</salla-button>\n                            </div>\n                        <p id="coupon-error" class="text-sm text-red-500"></p>\n                    </div>\n\n                    \x3c!-- Subtotal --\x3e\n                    ').concat(t.discount?'\n                    <div class="flex gap-2">\n                        <div onclick="salla.cart.deleteCoupon()" class="bg-[#ddd] rounded-full p-1 flex gap-1 items-center cursor-pointer my-1"><span>X</span>'.concat(t.coupon,'</div>\n                        </div>\n                        <div class="flex justify-between items-center text-sm text-gray-600">\n                            <span>').concat(salla.lang.get("common.subtotal"),":</span>\n                            <span>").concat(salla.money(t.sub_total),'</span>\n                        </div>\n                        <div class="flex justify-between items-center text-sm">\n                        <span class="text-[#ff001f] text-sm">').concat(salla.lang.get("common.discount"),':</span>\n                        <span class="text-[#ff001f] text-sm">- ').concat(salla.money(t.discount),"</span>\n                        </div>\n                    "):"",'\n\n                    \x3c!-- Total --\x3e\n                    <div class="flex justify-between items-center text-lg font-bold">\n                        <span>').concat(salla.lang.get("common.total"),":</span>\n                        <span>").concat(salla.money(t.total),'</span>\n                    </div>\n\n                    \x3c!-- Action Buttons --\x3e\n                    <div class="flex gap-2 !mt-4">\n                        <salla-button\n                            href="').concat(salla.url.get("cart"),'"\n                            width="wide"\n                            fill="outline"\n                            color="darker"\n                            loader-position="center">\n                            ').concat(salla.lang.get("cart.view_cart"),'\n                        </salla-button>\n                        <salla-button\n                            id="cart-submit"\n                            onclick="salla.config.get(\'user.type\') == \'guest\' ? salla.cart.submit() : this.load().then(() => salla.cart.submit())"\n                            width="wide"\n                            fill="solid"\n                            color="primary"\n                            loader-position="center">\n                            ').concat(salla.lang.get("cart.checkout"),"\n                        </salla-button>\n                    </div>\n                </div>\n            ");e.innerHTML='\n            <div class="shadow-default bg-white p-5 xs:p-7 rounded-md mb-5 relative '.concat(t.free_shipping_bar?"":"hidden",'" id="free-shipping">\n                        <div class="flex rtl:space-x-reverse space-x-3 items-center">\n                            <i class="bg-primary text-white rounded-icon sicon-shipping-fast {{ theme.is_rtl ? \'flip-x\':\'\' }}"></i>\n                            <div class="flex-1">\n                                <h4 class="shipping-item font-bold text-sm mb-1.5">').concat(freeShipping,'</h4>\n                                <p class="shipping-item text-sm font- text-gray-500">\n                                        <span id="free-shipping-msg">\n                                        ').concat(t.free_shipping_bar.has_free_shipping?salla.lang.get("pages.cart.has_free_shipping"):salla.lang.get("pages.cart.free_shipping_alert",{amount:salla.money(t.free_shipping_bar.remaining)}),'</span>\n                                    <span class="emoji ').concat(t.free_shipping_bar.has_free_shipping?"":"hidden",'" id="free-shipping-applied">🎉</span>\n                                </p>\n                            </div>\n                        </div>\n                        <div class="mt-8 bg-border-color rounded-full ').concat(t.free_shipping_bar.has_free_shipping?" hidden":"",'" id="free-shipping-bar">\n                            <div class="progress-bg transition-all duration-500 h-2.5 bg-primary relative rounded-full flex justify-end" style="width:').concat(t.free_shipping_bar.percent,'%">\n                                <i class="inline-block sicon-shipping-fast absolute -top-5 rtl:left-0 ltr:right-0 {{ theme.is_rtl ? \'flip-x\':\'\' }}"></i>\n                            </div>\n                        </div>\n                    </div>\n                <div class="pb-64">\n                    ').concat(o,'\n                    <div class="!bg-[#fcfaf3]">\n                        <salla-products-slider source="related" source-value="').concat(t.items.length?t.items[0].id:"",'" block-title="').concat(salla.lang.get("cart.mayLike"),"\" includes='").concat(includes_features,'\' display-all-url class="!my-4 aleena-arrows-2 products-cart !bg-[#fcfaf3]" limit="6"></salla-products-slider>\n                    </div>\n                    </div>\n                </div>\n                ').concat(r,"\n            ")}else e.innerHTML='\n                    <div class="flex flex-col items-center justify-center h-full space-y-6 py-8">\n                        <div class="text-center">\n                            <i class="sicon-shopping-bag text-gray-400 text-6xl mb-4"></i>\n                            <p class="text-lg text-gray-500">السلة فارغة</p>\n                        </div>\n                        <a href="'.concat(salla.url.get("/"),'"\n                           class="inline-flex items-center justify-center px-6 py-2 border border-transparent text-base font-medium rounded-xl text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all duration-200">\n                            تسوّق الآن\n                        </a>\n                    </div>\n                ')}),300)}}}],l&&o(a.prototype,l),s&&o(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,l,s}(s(HTMLElement));customElements.define("custom-navigation-cart",d)})();